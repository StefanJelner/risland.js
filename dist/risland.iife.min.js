/**
 * @license
 * author: Stefan Jelner
 * risland.js v0.0.1
 * Released under the ISC license.
 * 
 * See https://github.com/StefanJelner/risland.js.git
 */
var RIsland=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)},r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,Object.prototype.toString),n=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var n,o=e(t);if("boolean"===o)return"boolean";if("string"===o)return"string";if("number"===o)return"number";if("symbol"===o)return"symbol";if("function"===o)return n=t,"GeneratorFunction"===a(n)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(t))return"array";if(function(e){if(e.constructor&&"function"==typeof e.constructor.isBuffer)return e.constructor.isBuffer(e);return!1}
/*!
   * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   */(t))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(t))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(t))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(t))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(t))return"regexp";switch(a(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(t))return"generator";switch(o=r.call(t)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return o.slice(8,-1).toLowerCase().replace(/\s/g,"")};function a(e){return"function"==typeof e.constructor?e.constructor.name:null}var o=Symbol.prototype.valueOf,i=n;var c=function(t){return null!=t&&"object"===e(t)&&!1===Array.isArray(t)};function u(e){return!0===c(e)&&"[object Object]"===Object.prototype.toString.call(e)}var s=function(e,t){switch(i(e)){case"array":return e.slice();case"object":return Object.assign({},e);case"date":return new e.constructor(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return function(e){var t=e.length,r=Buffer.allocUnsafe?Buffer.allocUnsafe(t):Buffer.from(t);return e.copy(r),r}(e);case"symbol":return function(e){return o?Object(o.call(e)):{}}(e);case"arraybuffer":return function(e){var t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}(e);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function(e,t){return new e.constructor(e.buffer,e.byteOffset,e.length)}(e);case"regexp":return function(e){var t=void 0!==e.flags?e.flags:/\w+$/.exec(e)||void 0,r=new e.constructor(e.source,t);return r.lastIndex=e.lastIndex,r}(e);case"error":return Object.create(e);default:return e}},f=n,l=function(e){var t,r;return!1!==u(e)&&("function"==typeof(t=e.constructor)&&(!1!==u(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))};function p(e,t){switch(f(e)){case"object":return function(e,t){if("function"==typeof t)return t(e);if(t||l(e)){var r=new e.constructor;for(var n in e)r[n]=p(e[n],t);return r}return e}(e,t);case"array":return function(e,t){for(var r=new e.constructor(e.length),n=0;n<e.length;n++)r[n]=p(e[n],t);return r}(e,t);default:return s(e)}}var d=p,h=function(t){return function(t){return!!t&&"object"===e(t)}(t)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===g}(e)}(t)};var g="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function y(e,t){return!1!==t.clone&&t.isMergeableObject(e)?_((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function m(e,t,r){return e.concat(t).map((function(e){return y(e,r)}))}function v(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function b(e,t){try{return t in e}catch(e){return!1}}function x(e,t,r){var n={};return r.isMergeableObject(e)&&v(e).forEach((function(t){n[t]=y(e[t],r)})),v(t).forEach((function(a){(function(e,t){return b(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,a)||(b(e,a)&&r.isMergeableObject(t[a])?n[a]=function(e,t){if(!t.customMerge)return _;var r=t.customMerge(e);return"function"==typeof r?r:_}(a,r)(e[a],t[a],r):n[a]=y(t[a],r))})),n}function _(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||m,r.isMergeableObject=r.isMergeableObject||h,r.cloneUnlessOtherwiseSpecified=y;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):x(e,t,r):y(t,r)}_.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return _(e,r,t)}),{})};var w=_,A=function t(r,n){if(r===n)return!0;if(r&&n&&"object"==e(r)&&"object"==e(n)){if(r.constructor!==n.constructor)return!1;var a,o,i;if(Array.isArray(r)){if((a=r.length)!=n.length)return!1;for(o=a;0!=o--;)if(!t(r[o],n[o]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if((a=(i=Object.keys(r)).length)!==Object.keys(n).length)return!1;for(o=a;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=a;0!=o--;){var c=i[o];if(!t(r[c],n[c]))return!1}return!0}return r!=r&&n!=n};
/*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
function S(e){return"[object Object]"===Object.prototype.toString.call(e)}function O(e){var t,r;return!1!==S(e)&&(void 0===(t=e.constructor)||!1!==S(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}var j;var N="undefined"==typeof document?void 0:document,E=!!N&&"content"in N.createElement("template"),T=!!N&&N.createRange&&"createContextualFragment"in N.createRange();function C(e){return e=e.trim(),E?function(e){var t=N.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(e):T?function(e){return j||(j=N.createRange()).selectNode(N.body),j.createContextualFragment(e).childNodes[0]}(e):function(e){var t=N.createElement("body");return t.innerHTML=e,t.childNodes[0]}(e)}function I(e,t){var r,n,a=e.nodeName,o=t.nodeName;return a===o||(r=a.charCodeAt(0),n=o.charCodeAt(0),r<=90&&n>=97?a===o.toUpperCase():n<=90&&r>=97&&o===a.toUpperCase())}function F(e,t,r){e[r]!==t[r]&&(e[r]=t[r],e[r]?e.setAttribute(r,""):e.removeAttribute(r))}var R={OPTION:function(e,t){var r=e.parentNode;if(r){var n=r.nodeName.toUpperCase();"OPTGROUP"===n&&(n=(r=r.parentNode)&&r.nodeName.toUpperCase()),"SELECT"!==n||r.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),r.selectedIndex=-1)}F(e,t,"selected")},INPUT:function(e,t){F(e,t,"checked"),F(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var r=t.value;e.value!==r&&(e.value=r);var n=e.firstChild;if(n){var a=n.nodeValue;if(a==r||!r&&a==e.placeholder)return;n.nodeValue=r}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var r,n,a=-1,o=0,i=e.firstChild;i;)if("OPTGROUP"===(n=i.nodeName&&i.nodeName.toUpperCase()))i=(r=i).firstChild;else{if("OPTION"===n){if(i.hasAttribute("selected")){a=o;break}o++}!(i=i.nextSibling)&&r&&(i=r.nextSibling,r=null)}e.selectedIndex=a}}};function U(){}function P(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var M=function(e){return function(t,r,n){if(n||(n={}),"string"==typeof r)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var a=r;(r=N.createElement("html")).innerHTML=a}else r=C(r);var o=n.getNodeKey||P,i=n.onBeforeNodeAdded||U,c=n.onNodeAdded||U,u=n.onBeforeElUpdated||U,s=n.onElUpdated||U,f=n.onBeforeNodeDiscarded||U,l=n.onNodeDiscarded||U,p=n.onBeforeElChildrenUpdated||U,d=!0===n.childrenOnly,h=Object.create(null),g=[];function y(e){g.push(e)}function m(e,t){if(1===e.nodeType)for(var r=e.firstChild;r;){var n=void 0;t&&(n=o(r))?y(n):(l(r),r.firstChild&&m(r,t)),r=r.nextSibling}}function v(e,t,r){!1!==f(e)&&(t&&t.removeChild(e),l(e),m(e,r))}function b(e){c(e);for(var t=e.firstChild;t;){var r=t.nextSibling,n=o(t);if(n){var a=h[n];a&&I(t,a)?(t.parentNode.replaceChild(a,t),x(a,t)):b(t)}else b(t);t=r}}function x(t,r,n){var a=o(r);if(a&&delete h[a],!n){if(!1===u(t,r))return;if(e(t,r),s(t),!1===p(t,r))return}"TEXTAREA"!==t.nodeName?function(e,t){var r,n,a,c,u,s=t.firstChild,f=e.firstChild;e:for(;s;){for(c=s.nextSibling,r=o(s);f;){if(a=f.nextSibling,s.isSameNode&&s.isSameNode(f)){s=c,f=a;continue e}n=o(f);var l=f.nodeType,p=void 0;if(l===s.nodeType&&(1===l?(r?r!==n&&((u=h[r])?a===u?p=!1:(e.insertBefore(u,f),n?y(n):v(f,e,!0),f=u):p=!1):n&&(p=!1),(p=!1!==p&&I(f,s))&&x(f,s)):3!==l&&8!=l||(p=!0,f.nodeValue!==s.nodeValue&&(f.nodeValue=s.nodeValue))),p){s=c,f=a;continue e}n?y(n):v(f,e,!0),f=a}if(r&&(u=h[r])&&I(u,s))e.appendChild(u),x(u,s);else{var d=i(s);!1!==d&&(d&&(s=d),s.actualize&&(s=s.actualize(e.ownerDocument||N)),e.appendChild(s),b(s))}s=c,f=a}!function(e,t,r){for(;t;){var n=t.nextSibling;(r=o(t))?y(r):v(t,e,!0),t=n}}(e,f,n);var g=R[e.nodeName];g&&g(e,t)}(t,r):R.TEXTAREA(t,r)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var r=t.firstChild;r;){var n=o(r);n&&(h[n]=r),e(r),r=r.nextSibling}}(t);var _,w,A=t,S=A.nodeType,O=r.nodeType;if(!d)if(1===S)1===O?I(t,r)||(l(t),A=function(e,t){for(var r=e.firstChild;r;){var n=r.nextSibling;t.appendChild(r),r=n}return t}(t,(_=r.nodeName,(w=r.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==w?N.createElementNS(w,_):N.createElement(_)))):A=r;else if(3===S||8===S){if(O===S)return A.nodeValue!==r.nodeValue&&(A.nodeValue=r.nodeValue),A;A=r}if(A===r)l(t);else{if(r.isSameNode&&r.isSameNode(A))return;if(x(A,r,d),g)for(var j=0,E=g.length;j<E;j++){var T=h[g[j]];T&&v(T,T.parentNode,!1)}}return!d&&A!==t&&t.parentNode&&(A.actualize&&(A=A.actualize(t.ownerDocument||N)),t.parentNode.replaceChild(A,t)),A}}((function(e,t){var r,n,a,o,i=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var c=i.length-1;c>=0;c--)n=(r=i[c]).name,a=r.namespaceURI,o=r.value,a?(n=r.localName||n,e.getAttributeNS(a,n)!==o&&("xmlns"===r.prefix&&(n=r.name),e.setAttributeNS(a,n,o))):e.getAttribute(n)!==o&&e.setAttribute(n,o);for(var u=e.attributes,s=u.length-1;s>=0;s--)n=(r=u[s]).name,(a=r.namespaceURI)?(n=r.localName||n,t.hasAttributeNS(a,n)||e.removeAttributeNS(a,n)):t.hasAttribute(n)||e.removeAttribute(n)}})),k=function(e){var t,r=null,n=function(n){return function(){r=null,e.apply(n,t)}},a=function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];t=a,null===r&&(r=requestAnimationFrame(n(this)))};return a.cancel=function(){cancelAnimationFrame(r),r=null},a},H={exports:{}};(function(t){function r(e){var t,n,a=new Error(e);return t=a,n=r.prototype,Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n,a}function n(e,t,n){var a=t.slice(0,n).split(/\n/),o=a.length,i=a[o-1].length+1;throw r(e+=" at line "+o+" col "+i+":\n\n  "+t.split(/\n/)[o-1]+"\n  "+Array(i).join(" ")+"^")}r.prototype=Object.create(Error.prototype,{name:{value:"Squirrelly Error",enumerable:!1}});var a=new Function("return this")().Promise,o=!1;try{o=new Function("return (async function(){}).constructor")()}catch(t){if(!(t instanceof SyntaxError))throw t}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(t,r,n){for(var a in r)i(r,a)&&(null==r[a]||"object"!=e(r[a])||"storage"!==a&&"prefixes"!==a||n?t[a]=r[a]:t[a]=c({},r[a]));return t}var u=/^async +/,s=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,f=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,l=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g,p=/[.*+\-?^${}()|[\]\\]/g;function d(e){return p.test(e)?e.replace(p,"\\$&"):e}function h(e,t){t.rmWhitespace&&(e=e.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),s.lastIndex=0,f.lastIndex=0,l.lastIndex=0;var a=t.prefixes,o=[a.h,a.b,a.i,a.r,a.c,a.e].reduce((function(e,t){return e&&t?e+"|"+d(t):t?d(t):e}),""),i=new RegExp("([|()]|=>)|('|\"|`|\\/\\*)|\\s*((\\/)?(-|_)?"+d(t.tags[1])+")","g"),c=new RegExp("([^]*?)"+d(t.tags[0])+"(-|_)?\\s*("+o+")?\\s*","g"),p=0,h=!1;function g(r,a){var o,d={f:[]},g=0,y="c";function m(r){var a=e.slice(p,r),o=a.trim();if("f"===y)"safe"===o?d.raw=!0:t.async&&u.test(o)?(o=o.replace(u,""),d.f.push([o,"",!0])):d.f.push([o,""]);else if("fp"===y)d.f[d.f.length-1][1]+=o;else if("err"===y){if(o){var i=a.search(/\S/);n("invalid syntax",e,p+i)}}else d[y]=o;p=r+1}for("h"===a||"b"===a||"c"===a?y="n":"r"===a&&(d.raw=!0,a="i"),i.lastIndex=p;null!==(o=i.exec(e));){var v=o[1],b=o[2],x=o[3],_=o[4],w=o[5],A=o.index;if(v)"("===v?(0===g&&("n"===y?(m(A),y="p"):"f"===y&&(m(A),y="fp")),g++):")"===v?0==--g&&"c"!==y&&(m(A),y="err"):0===g&&"|"===v?(m(A),y="f"):"=>"===v&&(m(A),p+=1,y="res");else if(b)if("/*"===b){var S=e.indexOf("*/",i.lastIndex);-1===S&&n("unclosed comment",e,o.index),i.lastIndex=S+2}else"'"===b?(f.lastIndex=o.index,f.exec(e)?i.lastIndex=f.lastIndex:n("unclosed string",e,o.index)):'"'===b?(l.lastIndex=o.index,l.exec(e)?i.lastIndex=l.lastIndex:n("unclosed string",e,o.index)):"`"===b&&(s.lastIndex=o.index,s.exec(e)?i.lastIndex=s.lastIndex:n("unclosed string",e,o.index));else if(x)return m(A),p=A+o[0].length,c.lastIndex=p,h=w,_&&"h"===a&&(a="s"),d.t=a,d}return n("unclosed tag",e,r),d}var y=function o(i,s){i.b=[],i.d=[];var f,l=!1,d=[];function y(e,r){e&&(e=function(e,t,r,n){var a,o;return"string"==typeof t.autoTrim?a=o=t.autoTrim:Array.isArray(t.autoTrim)&&(a=t.autoTrim[1],o=t.autoTrim[0]),(r||!1===r)&&(a=r),(n||!1===n)&&(o=n),"slurp"===a&&"slurp"===o?e.trim():("_"===a||"slurp"===a?e=String.prototype.trimLeft?e.trimLeft():e.replace(/^[\s\uFEFF\xA0]+/,""):"-"!==a&&"nl"!==a||(e=e.replace(/^(?:\n|\r|\r\n)/,"")),"_"===o||"slurp"===o?e=String.prototype.trimRight?e.trimRight():e.replace(/[\s\uFEFF\xA0]+$/,""):"-"!==o&&"nl"!==o||(e=e.replace(/(?:\n|\r|\r\n)$/,"")),e)}(e,t,h,r))&&(e=e.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),d.push(e))}for(;null!==(f=c.exec(e));){var m,v=f[1],b=f[2],x=f[3]||"";for(var _ in a)if(a[_]===x){m=_;break}y(v,b),p=f.index+f[0].length,m||n("unrecognized tag type: "+x,e,p);var w=g(f.index,m),A=w.t;if("h"===A){var S=w.n||"";t.async&&u.test(S)&&(w.a=!0,w.n=S.replace(u,"")),w=o(w),d.push(w)}else if("c"===A){if(i.n===w.n)return l?(l.d=d,i.b.push(l)):i.d=d,i;n("Helper start and end don't match",e,f.index+f[0].length)}else if("b"===A){l?(l.d=d,i.b.push(l)):i.d=d;var O=w.n||"";t.async&&u.test(O)&&(w.a=!0,w.n=O.replace(u,"")),l=w,d=[]}else if("s"===A){var j=w.n||"";t.async&&u.test(j)&&(w.a=!0,w.n=j.replace(u,"")),d.push(w)}else d.push(w)}if(!s)throw r('unclosed helper "'+i.n+'"');return y(e.slice(p,e.length),!1),i.d=d,i}({f:[]},!0);if(t.plugins)for(var m=0;m<t.plugins.length;m++){var v=t.plugins[m];v.processAST&&(y.d=v.processAST(y.d,t))}return y.d}function g(e,t){var r=h(e,t),n="var tR='';"+(t.useWith?"with("+t.varName+"||{}){":"")+x(r,t)+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(var a=0;a<t.plugins.length;a++){var o=t.plugins[a];o.processFnString&&(n=o.processFnString(n,t))}return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r][0],a=t[r][1];e=(t[r][2]?"await ":"")+"c.l('F','"+n+"')("+e,a&&(e+=","+a),e+=")"}return e}function m(e,t,r,n,a,o){var i="{exec:"+(a?"async ":"")+b(r,t,e)+",params:["+n+"]";return o&&(i+=",name:'"+o+"'"),a&&(i+=",async:true"),i+"}"}function v(e,t){for(var r="[",n=0;n<e.length;n++){var a=e[n];r+=m(t,a.res||"",a.d,a.p||"",a.a,a.n),n<e.length&&(r+=",")}return r+"]"}function b(e,t,r){return"function("+t+"){var tR='';"+x(e,r)+"return tR}"}function x(e,t){for(var r=0,n=e.length,a="";r<n;r++){var o=e[r];if("string"==typeof o)a+="tR+='"+o+"';";else{var i=o.t,c=o.c||"",u=o.f,s=o.n||"",f=o.p||"",l=o.res||"",p=o.b,d=!!o.a;if("i"===i){t.defaultFilter&&(c="c.l('F','"+t.defaultFilter+"')("+c+")");var h=y(c,u);!o.raw&&t.autoEscape&&(h="c.l('F','e')("+h+")"),a+="tR+="+h+";"}else if("h"===i)if(t.storage.nativeHelpers.get(s))a+=t.storage.nativeHelpers.get(s)(o,t);else{var g=(d?"await ":"")+"c.l('H','"+s+"')("+m(t,l,o.d,f,d);g+=p?","+v(p,t):",[]",a+="tR+="+y(g+=",c)",u)+";"}else"s"===i?a+="tR+="+y((d?"await ":"")+"c.l('H','"+s+"')({params:["+f+"]},[],c)",u)+";":"e"===i&&(a+=c+"\n")}}return a}var _=function(){function e(e){this.cache=e}return e.prototype.define=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.reset=function(){this.cache={}},e.prototype.load=function(e){c(this.cache,e,!0)},e}();function w(e,t,n,a){if(t&&t.length>0)throw r((a?"Native":"")+"Helper '"+e+"' doesn't accept blocks");if(n&&n.length>0)throw r((a?"Native":"")+"Helper '"+e+"' doesn't accept filters")}var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function S(e){return A[e]}var O=new _({}),j=new _({each:function(e,t){var r="",n=e.params[0];if(w("each",t,!1),e.async)return new Promise((function(t){!function e(t,r,n,a,o){n(t[r],r).then((function(i){a+=i,r===t.length-1?o(a):e(t,r+1,n,a,o)}))}(n,0,e.exec,r,t)}));for(var a=0;a<n.length;a++)r+=e.exec(n[a],a);return r},foreach:function(e,t){var r=e.params[0];if(w("foreach",t,!1),e.async)return new Promise((function(t){!function e(t,r,n,a,o,i){a(r[n],t[r[n]]).then((function(c){o+=c,n===r.length-1?i(o):e(t,r,n+1,a,o,i)}))}(r,Object.keys(r),0,e.exec,"",t)}));var n="";for(var a in r)i(r,a)&&(n+=e.exec(a,r[a]));return n},include:function(e,t,n){w("include",t,!1);var a=n.storage.templates.get(e.params[0]);if(!a)throw r('Could not fetch template "'+e.params[0]+'"');return a(e.params[1],n)},extends:function(e,t,n){var a=e.params[1]||{};a.content=e.exec();for(var o=0;o<t.length;o++){var i=t[o];a[i.name]=i.exec()}var c=n.storage.templates.get(e.params[0]);if(!c)throw r('Could not fetch template "'+e.params[0]+'"');return c(a,n)},useScope:function(e,t){return w("useScope",t,!1),e.exec(e.params[0])}}),N=new _({if:function(e,t){w("if",!1,e.f,!0);var r="if("+e.p+"){"+x(e.d,t)+"}";if(e.b)for(var n=0;n<e.b.length;n++){var a=e.b[n];"else"===a.n?r+="else{"+x(a.d,t)+"}":"elif"===a.n&&(r+="else if("+a.p+"){"+x(a.d,t)+"}")}return r},try:function(e,t){if(w("try",!1,e.f,!0),!e.b||1!==e.b.length||"catch"!==e.b[0].n)throw r("native helper 'try' only accepts 1 block, 'catch'");var n="try{"+x(e.d,t)+"}",a=e.b[0];return n+"catch"+(a.res?"("+a.res+")":"")+"{"+x(a.d,t)+"}"},block:function(e,t){return w("block",e.b,e.f,!0),"if(!"+t.varName+"["+e.p+"]){tR+=("+b(e.d,"",t)+")()}else{tR+="+t.varName+"["+e.p+"]}"}}),E=new _({e:function(e){var t=String(e);return/[&<>"']/.test(t)?t.replace(/[&<>"']/g,S):t}}),T={varName:"it",autoTrim:[!1,"nl"],autoEscape:!0,defaultFilter:!1,tags:["{{","}}"],l:function(e,t){if("H"===e){var n=this.storage.helpers.get(t);if(n)return n;throw r("Can't find helper '"+t+"'")}if("F"===e){var a=this.storage.filters.get(t);if(a)return a;throw r("Can't find filter '"+t+"'")}},async:!1,storage:{helpers:j,nativeHelpers:N,filters:E,templates:O},prefixes:{h:"@",b:"#",i:"",r:"*",c:"/",e:"!"},cache:!1,plugins:[],useWith:!1};function C(e,t){var r={};return c(r,T),t&&c(r,t),e&&c(r,e),r.l.bind(r),r}function I(e,t){var n=C(t||{}),a=Function;if(n.async){if(!o)throw r("This environment doesn't support async/await");a=o}try{return new a(n.varName,"c","cb",g(e,n))}catch(t){throw t instanceof SyntaxError?r("Bad template syntax\n\n"+t.message+"\n"+Array(t.message.length+1).join("=")+"\n"+g(e,n)):t}}function F(e,t){var r;return t.cache&&t.name&&t.storage.templates.get(t.name)?t.storage.templates.get(t.name):(r="function"==typeof e?e:I(e,t),t.cache&&t.name&&t.storage.templates.define(t.name,r),r)}T.l.bind(T),t.compile=I,t.compileScope=x,t.compileScopeIntoFunction=b,t.compileToString=g,t.defaultConfig=T,t.filters=E,t.getConfig=C,t.helpers=j,t.nativeHelpers=N,t.parse=h,t.render=function(e,t,n,o){var i=C(n||{});if(!i.async)return F(e,i)(t,i);if(!o){if("function"==typeof a)return new a((function(r,n){try{r(F(e,i)(t,i))}catch(e){n(e)}}));throw r("Please provide a callback function, this env doesn't support Promises")}try{F(e,i)(t,i,o)}catch(e){return o(e)}},t.templates=O,Object.defineProperty(t,"__esModule",{value:!0})})(H.exports);var $={};function L(e,t,r,n){var a,o=!1,i=0;function c(){a&&clearTimeout(a)}function u(){for(var u=arguments.length,s=new Array(u),f=0;f<u;f++)s[f]=arguments[f];var l=this,p=Date.now()-i;function d(){i=Date.now(),r.apply(l,s)}function h(){a=void 0}o||(n&&!a&&d(),c(),void 0===n&&p>e?d():!0!==t&&(a=setTimeout(n?h:d,void 0===n?e-p:e)))}return"boolean"!=typeof t&&(n=r,r=t,t=void 0),u.cancel=function(){c(),o=!0},u}Object.defineProperty($,"__esModule",{value:!0}),$.debounce=function(e,t,r){return void 0===r?L(e,t,!1):L(e,r,!1!==t)};var B=$.throttle=L;return function(){function r(e){var r=this;this._initialConfig={$element:document.body,deepmerge:{clone:!1,isMergeableObject:O},delegations:{},initialState:{},load:function(){},morphdom:{onBeforeElUpdated:function(e,t){return!e.isEqualNode(t)}},shouldUpdate:function(e,t){return!A(e,t)},squirrelly:t(t({},H.exports.defaultConfig),{varName:"state"}),template:"",unload:function(){},update:function(){}},this._delegationFuncs={},this._loaded=!1,this._throttledRender=k(this._render),this._config=w(this._initialConfig,d(e),this._initialConfig.deepmerge),this._compiledTemplate=H.exports.compile(this._getTemplate(this._config.template),this._config.squirrelly),this._setState(this._config.initialState),Object.keys(this._config.delegations).forEach((function(e){r._delegationFuncs[e]=function(t){Object.keys(r._config.delegations[e]).forEach((function(n){t.target instanceof HTMLElement&&null!==t.target.closest(n)&&r._config.delegations[e][n](t,d(r._state),r._setState.bind(r))}))};var t=r._getThrottling(e);!0===t.throttled&&(r._delegationFuncs[e]="ms"in t?B(t.ms,r._delegationFuncs[e]):k(r._delegationFuncs[e])),r._config.$element.addEventListener(t.eventName,r._delegationFuncs[e])}))}return r.prototype.unload=function(){var e=this;Object.keys(this._config.delegations).forEach((function(t){e._config.$element.removeEventListener(t,e._delegationFuncs[t])})),this._config.$element.innerHTML="",this._config.unload(d(this._state))},r.prototype._setState=function(e){var t=this,r="function"==typeof e?e(d(this._state)):e;if(null!==r)if(r instanceof Promise)r.then((function(e){return t._setState(e)}));else if(Array.isArray(r))r.forEach((function(e){return t._setState(e)}));else{var n="customMerge"in this._config.deepmerge?w(d(this._state),r,this._config.deepmerge):w(this._state,r,this._config.deepmerge),a=this._config.shouldUpdate===this._initialConfig.shouldUpdate?this._config.shouldUpdate(this._state,n):this._config.shouldUpdate(d(this._state),"customMerge"in this._config.deepmerge?n:d(n));this._state=n,!0===a&&this._throttledRender()}},r.prototype._render=function(){var e=this;null===this._config.$element.firstChild&&this._config.$element.appendChild(document.createElement("div")),M(this._config.$element.firstChild,this._compiledTemplate(this._state,this._config.squirrelly),t(t({},this._config.morphdom),{onElUpdated:function(t){var r=d(e._state);!1===e._loaded?(e._loaded=!0,e._config.load(r,e._setState.bind(e))):e._config.update(r,e._setState.bind(e)),"onElUpdated"in e._config.morphdom&&e._config.morphdom.onElUpdated(t)}}))},r.prototype._getTemplate=function(t){if("string"==typeof t)return t;if("object"===e(t)&&"content"in t&&t.content instanceof DocumentFragment){var r=document.createElement("textarea");return r.innerHTML=Array.from(t.content.childNodes).map((function(e){return e.outerHTML})).join(""),r.value}return'<p style="color:red;">Error: template must be a string or a template tag element.</p>'},r.prototype._getThrottling=function(e){var t=e.split(/\./g);if(t.length>1&&"throttled"===t[1]){if(3===t.length){var r=parseInt(t[2],10);if(!isNaN(r))return{eventName:t[0],ms:r,throttled:!0}}return{eventName:t[0],throttled:!0}}return{eventName:t[0],throttled:!1}},r}()}();
